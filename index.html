<html>
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <link href="https://fonts.googleapis.com/css?family=Poppins" rel="stylesheet" />
    <link href="css/main.css" rel="stylesheet" />
  </head>
  <body>
    <div class="s131">
      <form id="queryForm" autocomplete="off" onsubmit="return privacyfriendlysearch();" method="GET" action="">
        <img class="logo" src="assets/logo.png">
        <div class="logoTitleContainer">
          <text class="logoTitle">Pluto Search üê∂</text>
        </div>
        <div class="inner-form">
          <div class="input-field first-wrap">
            <input id="queryInput" name="q" type="text" placeholder="What are you looking for?" autocomplete="off" />
          </div>
          <div class="input-field third-wrap">
            <input type="submit" class="btn-search" type="button" value="SEARCH">
          </div>
        </div>
        <div class="whatplutodoesContainer">
          <text class="whatplutodoes">Pluto first searches on <a href="https://nordvpn.com/blog/private-search-engines/">Privacy Friendly Search Engines</a> for you.</text>
          <br/><br/>
          <text class="whatplutodoes">Not finding what you are looking for? Just press back button and Pluto will search it for you on <a href="https://google.com">Google</a>.</text>
        </div>
        <div class="bottomSpacer"></div>
      </form>
    </div>
    <form name="ignore_me">
      <input type="hidden" id="cacheQueryInput" value="" />
    </form>
    <script>

    function privacyfriendlysearch() {
      const queryInput = document.getElementById('queryInput');
      if (queryInput === null || queryInput.value === '') {
        alert("Pluto can't sniff the web if you don't tell him what you are looking for..");
        return false;
      }

      const privacyFriendlySearchEngines = [
        "https://www.startpage.com/sp/search",
        "https://www.qwant.com/",
        "https://duckduckgo.com/"
      ];

      const cacheQueryInput = document.getElementById('cacheQueryInput');
      cacheQueryInput.value = queryInput.value;
      document.getElementById('queryForm').action = privacyFriendlySearchEngines[(Math.random() * privacyFriendlySearchEngines.length) | 0];
      document.getElementById('queryForm').submit();
    }
    window.addEventListener( "pageshow", function ( event ) {
    var historyTraversal = event.persisted ||
                         ( typeof window.performance != "undefined" &&
                              window.performance.navigation.type === 2 );
    const cacheQueryInput = document.getElementById('cacheQueryInput');
    if ( historyTraversal && cacheQueryInput !== null && cacheQueryInput.value !== '') {
      // redirect to Google Search
      const googleUrl = 'https://google.com/search?q=' + cacheQueryInput.value;
      cacheQueryInput.value = '';
      window.open(googleUrl, "_self");
      window.location.href=googleUrl;
      return;
    }
  });
  </script>
  </body>
</html>
